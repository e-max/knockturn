{% extends "base.html" %}

{% block title %} Transactions {% endblock %}

{% block content %}

<h1>Merchant {{merchant.id}}</h1>
<dl class="row">
  <dt class="col-sm-3">Amount: </dt>
  <dd class="col-sm-9">{{merchant.balance|grin}} <button type="button" class="btn btn-primary">Withdraw now</button></dd>
  <dt class="col-sm-3">Last withdrawal: </dt>
  <dd class="col-sm-9">{{last_payout.created_at|pretty_date}}</dd>
</dl>

	<p>Recent transactions: </p>
	<table class="table">
		<thead>
			<tr>
				<th>ID</th>
				<th>Amount</th>
				<th>Grins</th>
				<th>Status</th>
				<th>Confirmations</th>
				<th>Created</th>
				<th>Updated</th>
			</tr>
		</thead>
		<tbody>
{% for transaction in transactions %}
			<tr>
				<td>{{ transaction.external_id }}</td>
				<td class="text-nowrap">{{ transaction.amount }}</td>
				<td class="text-nowrap">{{ transaction.grins() }}</td>
				<td>{{ transaction.status.to_string() }}</td>
				<td>{{ transaction.confirmations }}</td>
				<td>{{ transaction.created_at|pretty_date }}</td>
				<td>{{ transaction.updated_at|pretty_date }}</td>
			</tr>
  {% endfor %}
		</tbody>
  </table>
	<form method="POST" action="/logout">
		<input type="submit" value="Logout">
	</form>

</body>
</html>

{% endblock %}
